# 7. Feature-based структура папок

Date: 2026-01-06

## Status

Accepted

## Context

Необходимо определить структуру папок проекта для обеспечения поддерживаемости и масштабируемости.

## Decision

Принята **feature-based** структура папок:

```
src/
├── features/          # Доменные модули
│   ├── accounts/
│   ├── operations/
│   ├── categories/
│   └── ...
├── shared/            # Общие ресурсы
│   ├── ui/
│   ├── hooks/
│   ├── utils/
│   └── services/
├── app/               # Конфигурация приложения
│   ├── routing/
│   ├── providers/
│   └── config/
└── index.tsx
```

### Структура тестов

Unit-тесты располагаются рядом с исходным кодом в папке `__tests__`:

```
src/
├── app/
│   └── config/
│       ├── env.ts
│       └── __tests__/
│           └── env.test.ts
├── features/
│   └── accounts/
│       ├── components/
│       │   ├── AccountCard.tsx
│       │   └── __tests__/
│       │       └── AccountCard.test.tsx
│       ├── hooks/
│       │   ├── useAccounts.ts
│       │   └── __tests__/
│       │       └── useAccounts.test.ts
│       └── stores/
│           ├── accountStore.ts
│           └── __tests__/
│               └── accountStore.test.ts
└── shared/
    └── utils/
        ├── zod-helpers.ts
        └── __tests__/
            └── zod-helpers.test.ts
```

**Принципы размещения тестов:**

1. Тесты находятся в папке `__tests__` рядом с тестируемым файлом
2. Имя тестового файла: `{имя_файла}.test.{ts|tsx}`
3. Моки для модулей располагаются в папке `__mocks__` рядом с исходным файлом
4. Тесты следуют той же структуре, что и исходный код (feature-based подход)

### Принципы

1. **Feature modules** - каждый доменный модуль изолирован
2. **Shared resources** - общие компоненты и утилиты
3. **App configuration** - настройки приложения отдельно
4. **Public API** - каждый модуль экспортирует только необходимое через `index.ts`
5. **Tests co-location** - тесты располагаются рядом с исходным кодом в папке `__tests__`

## Rationale

### Feature-based подход

- Ясная организация кода по доменам
- Легче найти код, связанный с фичей
- Проще рефакторинг и удаление фич
- Лучшая изоляция модулей

### Shared resources

- Переиспользование компонентов
- Централизованные утилиты
- Общие сервисы

## Consequences

### Положительные

- Лучшая организация кода
- Проще навигация по проекту
- Изоляция модулей
- Масштабируемость

### Негативные

- Необходимость четкого определения границ модулей
- Потенциальное дублирование кода между модулями (решается через shared)
